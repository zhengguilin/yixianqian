var loginPopup=function(){function g(a){document.getElementById(i)&&document.body.removeChild(document.getElementById(i));var b=document.createElement("div");b.id=i;b.style.position="absolute";b.style.zIndex="999999";_scrollWidth=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth);_scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);b.style.width=_scrollWidth+"px";b.style.height=_scrollHeight+"px";b.style.top="0";b.style.left="0px";b.style.background=
"#33393C";b.style.filter="alpha(opacity="+c.get("alpha")+")";b.style.opacity="0."+c.get("alpha");document.body.appendChild(b);showDiv=document.getElementById(a);showDiv.style.display="block";showDiv.style.position="absolute";showDiv.style.zIndex="99999999";showDivWidth=396;showDivHeight=290;showDiv.style.top=c.get("top")+"px";showDiv.style.left=document.documentElement.scrollLeft+Math.max(document.documentElement.clientWidth,document.body.scrollWidth)/2-showDiv.scrollWidth/2+"px";if(document.all){c.selectOptions=
document.getElementsByTagName("select");a=0;for(b=c.selectOptions.length;a<b;a++)if(c.selectOptions[a].style.display!="none")c.selectOptions[a].style.display="none"}}function m(){if(d(i)){d(i).style.width=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth);d(i).style.height=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}if(d(j))d(j).style.left=document.documentElement.scrollLeft+Math.max(document.documentElement.clientWidth,document.body.scrollWidth)/
2-d(j).scrollWidth/2+"px"}function d(a){return document.getElementById(a)}function o(){openlogindivflag=false;var a=i;document.getElementById(a)&&document.body.removeChild(document.getElementById(a));if(a=d(j))a.style.display="none";d(c.get("form"))&&d(c.get("form")).reset();if(a=d(c.get("error")))a.style.display="none";if(document.all){a=0;for(var b=c.selectOptions.length;a<b;a++)c.selectOptions[a].style.display="";c.selectOptions=[]}c.interval!=null&&window.clearInterval(c.interval)}function p(){if(d(c.get("name")).value==
""||d(c.get("name")).value.match(/\//g)){t("请填写您的登录帐号");document.getElementById(c.get("name")).focus();return false}if(d(c.get("pass")).value==""){t("请填写您的密码");d(c.get("pass")).focus();return false}return true}function A(){var a=d(c.get("name"));if(a){var b=u("save_jy_login_name");if(b!=null&&b!=""){a.value=b;d(c.get("pass")).focus()}else{a.value="注册邮箱/手机号/佳缘ID";d(c.get("pass")).value=""}}}function u(a){if(document.cookie.length>0){c_start=document.cookie.indexOf(a+"=");if(c_start!=-1){c_start=c_start+
a.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return decodeURIComponent(document.cookie.substring(c_start,c_end))}}return null}function t(a){var b=d(c.get("error"));b.style.display="block";b.innerHTML=a;d(c.get("pass")).value="";d(c.get("pass")).focus()}function v(){c.interval=window.setInterval(function(){var a;if(document.documentElement&&document.documentElement.scrollTop)a=document.documentElement.scrollTop;else if(document.body)a=document.body.scrollTop;
percent=0.1*(a-q);percent=percent>0?Math.ceil(percent):Math.floor(percent);if(a=d(j)){if(a.style.top!=c.get("top"))a.style.top=parseInt(a.style.top)+percent+"px";q+=percent;m()}},10)}function B(a){var b=document.createElement("div");b.id="pop_login_div_"+(a?a:"");b.style.display="none";document.body.appendChild(b);return b}function D(a){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.id="linkidforpop";b.href=a;document.getElementsByTagName("head")[0].appendChild(b);window.setTimeout(function(){d("linkidforpop")},
1E3)}function E(a){var b=document.createElement("script");b.language="javascript";b.type="text/javascript";b.id="scriptidforpop";b.href=a;document.getElementsByTagName("head")[0].appendChild(b);window.setTimeout(function(){d("linkidforpop")},1E3)}var C=window.onresize;window.onresize=function(){typeof C=="function"&&C();m()};var q=0,w="",i="",j="",l=false,r=null,h={form:"loginForm",name:"login_email",pass:"login_password",error:"errorInfo",top:200,move:true,alpha:70},F={get_common_tpl:function(a){send_jy_pv2("open_window_"+
a.key+"_pv");return'<iframe src="" name="login_run" width=0 height=0 style="display:none"></iframe><div > <div class="alert_bg2"> <div class="clear text_pop_login"><a href="#" onclick="loginPopup.closelogindiv(\''+a.showid+"');send_jy_pv2('new_popup_"+a.key+'_close\');" class="closer"></a></div><div class="alert_left"><div class="text_pop_login" style="padding:0;height:40px;"><div class="no_reg">老会员登录</div></div><p id="errorInfo_new" class="red"></p><form name="loginForm" id="loginForm_new" method="post" action="/login/dologin.php?"  target="login_run"><dl class="login_box clear"><dt>登录帐号：</dt><dd style="width:160px;" ><input type="text" id="login_email_new" onblur="check_text(this);" onfocus="clear_text(this);" onkeydown="if(event.keyCode==9){document.getElementById(\'login_password_new\').focus(); return false;}"  onkeyup ="loginPopup.onkeyupName(event);" name="name" class="texts" style="width:150px;"  /></dd><dt>密<FONT COLOR="white">密码</FONT>码：</dt><dd style="width:160px;" ><input type="password" name="password" id="login_password_new"  onkeydown="if(event.keyCode==9){document.getElementById(\'on_submit_new\').focus();return false;}"   onkeyup ="loginPopup.onkeyupPass(event);"  class="texts" style="width:150px;" /></dd><dt></dt> <dd style="width:160px;"><span class="check_g"><input  type="checkbox" name="remem_pass" id="check_save" checked="true" /></span> <span class="gray">记住我的登录帐号</span></dd><dt></dt><dd style="  width:160px; padding:5px 0;"><input type="button" class="login_btn" id="on_submit_new"  onclick="loginPopup.dologin();send_jy_pv2(\'new_popup_'+
a.key+'_submit\')"  /><br><span class="forget_pw"><a target="_blank" href="http://www.jiayuan.com/login/validate.php">忘记密码</a></span></dd></dl><input type="hidden" id="ajax" name="ajaxsubmit" value="1" /><input type="hidden" name="ljg_login" value="1"/> </form></div><div class="alert_right"><div class="text_pop_login" style="padding:0 0 0 26px;height:40px;"><div class="no_reg">新会员注册</div></div> <a target="_blank" href="http://reg.jiayuan.com/?bd='+a.key+'" onclick="send_jy_pv2(\'new_popup_'+a.key+
'_reg\');" class="reg_bg">立即注册</a></div></div></div>'}},x=null,y=null,c={selectOptions:[],set:function(a,b){h[a]=b},get:function(a){return h[a]},openlogindiv:function(a,b,e){l=true;c.onOpen(a);if(typeof e=="function")r=e;w=b;j=a;i="will_mask_"+a;g(a);q=0;h.move==true&&v();A()},closelogindiv:function(a){l=false;c.onClose(a);o(a);if(typeof loginWindow=="object"&&x!=null)loginWindow=null;loginWindow.showError=x;if(y!=null)loginWindow.refreshPage=y},dologin:function(){if(p()){if(/msn|miuu|xique|51liehun/.test(location.host))d(c.get("form")).action=
"/login/dologin.php?pre_url="+w;else d(c.get("form")).action="http://passport.jiayuan.com/dologin.php?host="+location.host+"&pre_url="+w;d(c.get("form")).submit()}},showError:function(a){t(a)},refreshPage:function(){if(!/online/.test(location.href))if(/msn/.test(location.href))if(typeof header_show_login_div=="function"&&typeof JY.login.getUser=="function")header_show_login_div(JY.login.getUser());else{if(profile=typeof get_head_cookie=="function"?get_head_cookie("PROFILE"):false){array_of_profile=
profile.split(":");cookie_uid=array_of_profile[0];cookie_nickname_en=array_of_profile[1];cookie_nickname=decodeURIComponent(cookie_nickname_en);if(d("login_head_top"))d("login_head_top").innerHTML='<dl class="logined_c"><dt>欢迎您：<strong><a href="http://jiayuan.msn.com.cn/profile/?uid='+cookie_uid+'">'+cookie_nickname+'</a></strong><dt><dd>您的世纪佳缘征友地址是：<span id="head_url" >http://jiayuan.msn.com.cn/profile/?uid='+cookie_uid+'</span>&nbsp;&nbsp;<a href="javascript:mycopy_head();" target="_self"><img src="http://images.jiayuan.com/w4/global/i/hf_btn03.jpg" /></a>&nbsp;<a href="/login/logout.php" target="_self"><img src="http://images.jiayuan.com/w4/global/i/hf_btn04.jpg" /></a></dd></dl><h3><a href="http://jiayuan.msn.com.cn/helpcenter/">帮助</a>&nbsp;<a style="cursor:pointer" onclick="javascript:AddFav(\'世纪佳缘交友\',\'http://jiayuan.msn.com.cn/\')">收藏</a>&nbsp;<a style="cursor:pointer" onclick="this.style.behavior=\'url(#default#homepage)\';this.setHomePage(\'http://jiayuan.msn.com.cn/\')">设主页</a></h3>'}}else if(typeof header_show_login_div==
"function"&&typeof JY.login.getUser=="function")header_show_login_div(JY.login.getUser());else if(profile=typeof get_head_cookie=="function"?get_head_cookie("PROFILE"):false){array_of_profile=profile.split(":");cookie_uid=array_of_profile[0];cookie_nickname_en=array_of_profile[1];cookie_nickname=decodeURIComponent(cookie_nickname_en);if(d("login_head_top"))d("login_head_top").innerHTML='<dl class="logined_c"><dt>欢迎您：<strong><a href="http://www.jiayuan.com/'+cookie_uid+'">'+cookie_nickname+'</a></strong><dt><dd>您的世纪佳缘征友地址是：<span id="head_url" >http://www.jiayuan.com/'+
cookie_uid+'</span>&nbsp;&nbsp;<a href="javascript:mycopy_head();" target="_self"><img src="'+HEAD_IMAGE_URL+'i/hf_btn03.jpg" /></a>&nbsp;<a href="http://www.'+mydomain+'/login/logout.php" target="_self"><img src="'+HEAD_IMAGE_URL+'i/hf_btn04.jpg" /></a></dd></dl><h3><a href="http://www.'+mydomain+'/helpcenter/">帮助</a>&nbsp;<a style="cursor:pointer" onclick="javascript:AddFav(\'世纪佳缘交友\',\'http://www.'+mydomain+"')\">收藏</a>&nbsp;<a style=\"cursor:pointer\" onclick=\"this.style.behavior='url(#default#homepage)';this.setHomePage('http://www."+
mydomain+'\')">设主页</a>&nbsp;<a href="http://www.'+mydomain+'/bottom/comment.html" target="_blank">联系客服</a></h3>'}is_login_user="1";o(j);typeof r=="function"&&r();c.setCookie("popup_count_15",0,-1);c.setCookie("popup_count_16",0,-1);c.setCookie("poplogincount",0,-1)},onkeyupName:function(a){if(a.keyCode==13)if(d(c.get("name")).value==""){d(c.get("name")).focus();return false}else d(c.get("pass")).focus()},onkeyupPass:function(a){if(a.keyCode!=9)if(a.keyCode==13){if(d(c.get("name")).value==""){d(c.get("name")).focus();
return false}if(d(c.get("pass")).value==""){d(c.get("pass")).focus();return false}this.dologin()}},setIds:function(a){h=a;if(typeof h.top=="undefined")h.top=200;if(typeof h.move=="undefined")h.move=true;if(typeof h.alpha=="undefined")h.alpha=70},getType:function(a){var b;return((b=typeof a)=="object"?a==null&&"null"||Object.prototype.toString.call(a).slice(8,-1):b).toLowerCase()},extend:function(a,b){for(var e in b)if(c.getType(b[e])=="array"||c.getType(b[e])=="object"){a[e]=c.getType(b[e])=="array"?
[]:{};arguments.callee(a[e],b[e])}else a[e]=b[e];return a},onOpen:function(){l=true},onClose:function(){l=true},openURL:function(a){l=true;var b=a.id?d(a.id):B(),e=b.id;c.onOpen(e);j=e;i="will_mask_"+e;q=0;h.move==true&&v();loginPopup.onLoad=function(){a.onload.call(this,e)};b.innerHTML="<iframe id='dialogFrame' width='100%' height='100%' frameborder='0' onload='loginPopup.onLoad();' style='overflow:auto;'></iframe>";b.style.width=(a.width?a.width:200)+"px";b.style.height=(a.height?a.height:200)+
"px";d("dialogFrame").src=a.url;g(e)},openTPL:function(a,b){if(!(c.isOpen()||c.isLogin())){l=true;if(typeof loginWindow!="obejct")loginWindow={};else{x=loginWindow.refreshPage;y=loginWindow.showError}loginWindow.closelogindiv&&loginWindow.closelogindiv("sdf");loginWindow.showError=function(n){loginPopup.showError(n)};loginWindow.refreshPage=function(n){loginPopup.refreshPage(n)};var e=a.id?d(a.id):B("index"),f=e.id;c.onOpen(f);e.innerHTML=F.get_common_tpl({key:a.tplconfig.key,showid:f});j=f;i="will_mask_"+
f;g(f);q=0;h.move==true&&v();a.initForm&&a.initForm==true&&A();if(typeof b=="function")r=b}},onLoad:function(){r.call(this,2)},loadResource:function(a,b){b&&b=="css"?D(a):E(a)},setCookie:function(a,b,e,f,n,k){f=document.domain;f=f=f.substr(f.indexOf(".")+1);try{var s=a+"="+encodeURIComponent(b);if(e){var z=new Date;z.setTime(z.getTime()+e*3600*24);s+="; expires="+z.toGMTString()}s+="; path=/";if(f)s+="; domain="+f;if(k)s+="; secure";document.cookie=s}catch(G){}},getCookie:function(a){return u(a)},
isOpen:function(){if(typeof loginWindow=="object"&&typeof loginWindow.isOpen=="function")if(loginWindow.isOpen()==true)return true;return l},log:function(a){if(window.console)if(window.console.trace){window.console.trace();window.console.log(a)}},isLogin:function(){var a=u("PROFILE");if(a&&a.length>10){a=a.split(":");if(/^\d{7,10}$/.test(a[0]))if(parseInt(a[0])>0){c.setCookie("popup_count_15",0,-1);c.setCookie("popup_count_16",0,-1);c.setCookie("poplogincount",0,-1);return true}}return false},taskRun:function(a,
b,e,f){if(!c.isLogin())var n=window.setInterval(function(){if(!c.isOpen()){var k=c.getCookie("popup_count_"+e);k=k==null?0:parseInt(k);if(k<a){c.log(k);if(c.isOpen())return;c.openTPL({tplconfig:{key:e},initForm:true},f);c.setCookie("popup_count_"+e,k+1)}window.clearInterval(n)}},b)}};return c}();function clear_text(g){if(g.value.match(/\//g))g.value=""}function check_text(g){if(g.value=="")g.value="注册邮箱/手机号/佳缘ID"}
var send_jy_pv2=function(g){function m(p){p.onerror=null;p.onload=null;p.onabort=null}var d=["59.151.18.13","59.151.12.227"],o=["a","b","c","d","e","f","g","h","i","g","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"];g="http://"+d[Math.floor(Math.random()*d.length)]+"/any/"+o[Math.floor(Math.random()*o.length+1)-1]+".gif?|"+g+"|"+(new Date).getTime()+"|";d=new Image;d.onload=function(){m(this)};d.onerror=function(){m(this)};d.onabort=function(){m(this)};d.src=g};